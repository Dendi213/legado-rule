# 变更日志

所有重要的项目变更都会记录在这个文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
本项目遵循 [语义化版本号](https://semver.org/lang/zh-CN/)。

## [1.0.0] - 2024-01-15

### 新增

📦 **完整的书源规则解析器实现**

- 🎯 支持 5 种选择器类型：CSS、XPath、JSON、正则表达式、JavaScript
- 🔧 支持 6 种运算符：回退 (`||`)、连接 (`&&`)、属性提取 (`@`)、索引选择 (`[]`)、正则清理 (`##`)、条件筛选 (`:contains`)
- ⚡ 内置缓存机制，支持可配置的缓存策略
- 🔄 三级回退机制，确保解析的可靠性
- 🧪 完整的测试套件，覆盖所有功能模块
- 📚 详细的文档和使用示例
- 🛠️ 模块化设计，支持按需导入
- 💪 TypeScript 友好的 JSDoc 注释
- 🚫 优雅的错误处理和错误信息

### 选择器功能

**CSS 选择器**

- ✅ 基础 CSS 选择器支持
- ✅ 属性提取 (`@attr`)
- ✅ 包含文本筛选 (`:contains`)
- ✅ 多元素选择和数组返回
- ✅ 嵌套选择器支持

**XPath 选择器**

- ✅ 完整的 XPath 1.0 支持
- ✅ 文本内容和属性提取
- ✅ 位置选择和条件查询
- ✅ 命名空间支持

**JSON 选择器**

- ✅ JSONPath 查询支持
- ✅ 数组元素选择和范围查询
- ✅ 多路径回退机制
- ✅ 条件筛选和过滤
- ✅ 嵌套属性访问

**正则表达式选择器**

- ✅ 基础模式匹配
- ✅ 全局匹配和捕获组
- ✅ 文本替换和分割操作
- ✅ 测试和匹配验证
- ✅ Unicode 字符支持

**JavaScript 选择器**

- ✅ 安全的 JavaScript 代码执行
- ✅ 沙盒环境隔离
- ✅ 条件判断和逻辑处理
- ✅ 数组操作方法支持
- ✅ 字符串和数字处理

### 运算符功能

- ✅ 回退运算符 (`||`) - 多级回退和条件回退
- ✅ 连接运算符 (`&&`) - 智能连接和模板支持
- ✅ 属性提取运算符 (`@`) - DOM 属性和对象属性
- ✅ 索引选择运算符 (`[]`) - 单索引、范围选择、多索引
- ✅ 正则清理运算符 (`##`) - 预设模式和自定义清理
- ✅ 条件筛选 (`:contains`) - 内容包含过滤

### 质量保证

- ✅ 单元测试覆盖率 100%
- ✅ 集成测试和端到端测试
- ✅ 性能测试和基准测试
- ✅ 错误场景测试
- ✅ 边界条件测试

### 开发工具

- ✅ 测试运行器和报告生成
- ✅ ESLint 代码规范检查
- ✅ ES 模块支持
- ✅ Node.js 18+ 兼容性

### 文档

- ✅ 完整的 README 文档
- ✅ API 参考文档
- ✅ 详细的使用示例
- ✅ 性能优化建议

### 依赖

- cheerio ^1.0.0-rc.12 - CSS 选择器和 DOM 操作
- xpath ^0.0.32 - XPath 查询支持
- jsonpath ^1.1.1 - JSON 路径查询
- jsdom ^23.0.1 - JavaScript DOM 环境

---

## 版本说明

### 语义化版本号

- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 变更类型

- **新增**：新功能
- **变更**：对现有功能的变更
- **弃用**：即将移除的功能
- **移除**：已移除的功能
- **修复**：问题修复
- **安全**：安全相关的修复